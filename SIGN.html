<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LazyMinting</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.6.9/ethers.umd.min.js"></script>
</head>
<body>
  <script type="text/javascript">
    const SIGN_DOMAIN = "IIIT SRICITY";
    const SIGN_VERSION = "1";
    const chainId = 1
    const contractAddress = "0xBBa767f31960394B6c57705A5e1F0B2Aa97f0Ce8" // Put the address here from remix
    const signer = new ethers.Wallet("503f38a9c967ed597e47fe25643985f032b072db8075426a92110f82df48dfcb") // private key that I use for address 0x5B38Da6a701c568545dCfcB03FcB875f56beddC4

    const domain = {
      name: SIGN_DOMAIN,
      version: SIGN_VERSION,
      verifyingContract: contractAddress,
      chainId
    }

    async function createVoucher(tokenId, studentName, uri) {
      const voucher = { tokenId, studentName, uri }
      const types = {
        LazyMintVoucher: [
          {name: "tokenId", type: "uint256"},
          {name: "studentName", type: "string"},
          {name: "uri", type: "string"},
        ]
      }

      const signature = await signer._signTypedData(domain, types, voucher)
      return {
        ...voucher,
        signature
      }
    }

    async function main() {
      const voucher = await createVoucher(5,"jananathan", "uri") // the address is the address which receives the NFT
      console.log(`[${voucher.tokenId}, ${voucher.studentName}, "${voucher.uri}", "${voucher.signature}"]`)
    }
  </script>
</body>
</html>